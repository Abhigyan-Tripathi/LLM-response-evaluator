<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>LLM-judge</title>
<style>
    body {
        background: white;
        font-family: Arial, sans-serif;
        margin: 40px;
        color: black;
    }

    h1 {
        text-align: center;
        font-size: 32px;
        margin-bottom: 30px;
    }

    .container {
        max-width: 900px;
        margin: auto;
    }

    .input-row {
        display: flex;
        gap: 20px;
    }

    textarea {
        width: 100%;
        height: 150px;
        padding: 10px;
        font-size: 14px;
        border: 1px solid #ccc;
        border-radius: 6px;
        resize: vertical;
    }

    .prompt-box {
        width: 100%;
        margin-bottom: 20px;
    }

    button {
        margin-top: 20px;
        padding: 12px 20px;
        font-size: 16px;
        background: black;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
    }

    button:hover {
        background: #333;
    }

    .result {
        margin-top: 40px;
    }

    .bar-container {
        width: 100%;
        background: #eee;
        border-radius: 6px;
        margin-bottom: 15px;
        overflow: hidden;
    }

    .bar {
        height: 32px;
        text-align: center;
        color: white;
        font-weight: bold;
        line-height: 32px;
    }

    .a-bar { background: #4CAF50; }
    .b-bar { background: #2196F3; }
    .tie-bar { background: #9C27B0; }
</style>
</head>
<body>

<h1>LLM-judge</h1>

<div class="container">

    <textarea id="prompt" class="prompt-box" placeholder="Enter the prompt..."></textarea>

    <div class="input-row">
        <textarea id="respA" placeholder="Response from Model A..."></textarea>
        <textarea id="respB" placeholder="Response from Model B..."></textarea>
    </div>

    <button onclick="sendToJudge()">Evaluate</button>

    <!-- Results -->
    <div id="results" class="result"></div>

</div>

<script>
function sendToJudge() {
    const prompt = document.getElementById("prompt").value;
    const response_a = document.getElementById("respA").value;
    const response_b = document.getElementById("respB").value;

    fetch("https://LLM-response-evaluator.onrender.com/judge", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ prompt, response_a, response_b })
    })
    .then(res => res.json())
    .then(data => {
        console.log("RESPONSE:", data);   
        renderBars(data);
    })
    .catch(err => {
        console.error("ERROR:", err);
    });

}

function renderBars(data) {
    const { winner_model_a, winner_model_b, winner_tie } = data;

    const pctA = (winner_model_a * 100).toFixed(1);
    const pctB = (winner_model_b * 100).toFixed(1);
    const pctT = (winner_tie * 100).toFixed(1);

    document.getElementById("results").innerHTML = `
        <h3>Results</h3>

        <div class="bar-container">
            <div class="bar a-bar" style="width:${pctA}%">${pctA}% — Model A</div>
        </div>

        <div class="bar-container">
            <div class="bar b-bar" style="width:${pctB}%">${pctB}% — Model B</div>
        </div>

        <div class="bar-container">
            <div class="bar tie-bar" style="width:${pctT}%">${pctT}% — Tie</div>
        </div>
    `;
}
</script>

</body>
</html>
